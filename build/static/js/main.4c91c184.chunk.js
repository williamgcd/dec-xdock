(this["webpackJsonpdec-xdock"]=this["webpackJsonpdec-xdock"]||[]).push([[1],{110:function(e,n,t){},111:function(e,n,t){"use strict";t.r(n);var r,o=t(1),c=t.n(o),i=t(49),a=t.n(i),s=t(3),u=t(31),l=t(72),d=t.p+"static/media/logo-dec.90d54afd.png",j=t(17),b=t(18),p=b.a.div(r||(r=Object(j.a)(["\n   text-align: center;\n\n   ion-content {\n      --background: #fff;\n   }\n"]))),f=t(2),m=function(){return Object(f.jsx)(p,{as:s.i,children:Object(f.jsx)(s.e,{children:Object(f.jsxs)("div",{className:"container",children:[Object(f.jsx)("img",{src:d,alt:"Logotipo D&C Cargas e Log\xedstica"}),Object(f.jsx)("br",{}),Object(f.jsx)(s.d,{color:"danger",disabled:!0,fill:"solid",expand:"block",size:"large",routerLink:"/picking",children:"Coleta"}),Object(f.jsx)("br",{}),Object(f.jsx)(s.d,{color:"danger",fill:"solid",expand:"block",size:"large",routerLink:"/picking",children:"Picking"}),Object(f.jsx)("br",{}),Object(f.jsx)(s.d,{color:"danger",disabled:!0,fill:"solid",expand:"block",size:"large",routerLink:"/picking",children:"Expedi\xe7\xe3o"})]})})})},x=t(13),h=t(53),O=t(5),g=t.n(O),v=t(12),y=t(76),k=t(54);t(112),t(113);k.a.initializeApp({apiKey:"AIzaSyBrfZlZnVuAM-nPnXxrHjIrU97UKhs-UkM",authDomain:"dec-xdock-dev1.firebaseapp.com",projectId:"dec-xdock-dev1",storageBucket:"dec-xdock-dev1.appspot.com",messagingSenderId:"164885050499",appId:"1:164885050499:web:f5a54b421ae7702c2c57b6",measurementId:"G-1DZB53Z1QQ"});var w,C,_,P,N,S,B,D=k.a.firestore(),F=Object(o.createContext)({volumes:[],loading:!0,error:!1}),L=function(e){var n=Object(y.a)(D.collection("volumes")),t=Object(x.a)(n,3),r=t[0],c=t[1],i=t[2],a=Object(o.useState)(),u=Object(x.a)(a,2),l=u[0],d=u[1],j=Object(o.useState)(),b=Object(x.a)(j,2),p=b[0],m=b[1],O={volume:l,volumes:r,setVolume:d,getVolumeByBarcode:function(e){var n,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=r.docs.filter((function(n){return n.data().codBarras===e})),c=o[0];return c?"L"===c.data().status?(c=void 0,m('Este documento j\xe1 est\xe1 "em tr\xe2nsito".')):t||"F"!==c.data().status||(c=void 0,m("Este documento j\xe1 foi finalizado.")):m("Documento n\xe3o encontrado."),(null===(n=c)||void 0===n?void 0:n.id)&&(console.log(c),D.doc("volumes/".concat(c.id)).set({status:"L"},{merge:!0})),d(c),c},getVolumesPercentage:function(){var e=r.docs.length||1;return r.docs.filter((function(e){return"F"===e.data().status})).length/e},putVolume:function(e,n){var t="volumes/".concat(e);D.doc(t).set(n,{merge:!0})},putVolumeInRoute:function(){var e=Object(v.a)(g.a.mark((function e(n){var t,r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="volumes/".concat(l.id),e.next=3,D.doc(t).get();case 3:if(r=e.sent,e.prev=4,"L"===r.data().status){e.next=8;break}return m('Documento n\xe3o est\xe1 com status "lido" para ser salvo'),e.abrupt("return");case 8:if(r.data().idRota===n){e.next=11;break}return m("Documento n\xe3o encontrado."),e.abrupt("return");case 11:D.doc(t).set({status:"F"},{merge:!0}),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(4),console.log("putVolumeInRoute",e.t0);case 17:d();case 18:case"end":return e.stop()}}),e,null,[[4,14]])})));return function(n){return e.apply(this,arguments)}}(),finish:function(){var e=Object(v.a)(g.a.mark((function e(){var n,t,r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.collection("volumes").get();case 2:if(n=e.sent,!n.docs.filter((function(e){return"F"!==e.data().status})).length){e.next=7;break}return m("Ainda existem documentos pendentes, n\xe3o \xe9 poss\xedvel finalizar."),e.abrupt("return",!1);case 7:return e.prev=7,t=(new Date).toISOString().split("T")[0],e.next=11,D.collection("picking").doc(t).set({data:(new Date).toISOString(),volumes:n.docs.map((function(e){return e.data()})),statusPicking:"F"});case 11:r=D.batch(),n.docs.map((function(e){return r.delete(D.collection("volumes").doc(e.id)),e})),r.commit(),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(7),console.log("finish",e.t0);case 19:case"end":return e.stop()}}),e,null,[[7,16]])})));return function(){return e.apply(this,arguments)}}()},k={buttons:["OK"],message:p,isOpen:!!p,onDidDismiss:function(){return m()}};return i||c?Object(f.jsxs)(F.Provider,{value:O,children:[i&&Object(f.jsxs)("strong",{children:["Error: ",JSON.stringify(i)]}),c&&Object(f.jsx)("strong",{children:"Loading..."})]}):Object(f.jsxs)(F.Provider,{value:O,children:[Object(f.jsx)("div",{className:"PickingContext",children:e.children}),Object(f.jsx)(s.b,Object(h.a)({},k))]})},z=t(36),I=b.a.div.attrs({className:"PickingFooterBar"})(w||(w=Object(j.a)(["\n   border-radius: 0.5rem;\n   display: flex;\n   flex-direction: column;\n   flex: 1 1 auto;\n   margin-right: 1rem;\n   overflow: hidden;\n   position: relative;\n\n   & > * + * {\n      margin-top: -1px;\n   }\n"]))),E=b.a.div(C||(C=Object(j.a)(["\n   color: var(--ion-color-danger-shade);\n   font-size: 1.125rem;\n   font-weight: bold;\n   padding: 0.825rem 1rem;\n   position: absolute;\n   top: 0;\n   right: 0;\n   text-shadow: 1px 1px rgba(0, 0, 0, 0.25);\n"]))),V=function(e){var n=e.value,t={color:"danger",type:void 0===n?"indeterminate":"determinate",value:n};return Object(f.jsxs)(I,{children:[Object(z.a)(Array(21).keys()).map((function(e){return Object(f.jsx)(s.j,Object(h.a)({},t),"pbar-".concat(e))})),Object(f.jsx)(E,{children:"".concat(100*n,"%")})]})},M=b.a.div.attrs({className:"PickingFooter container"})(_||(_=Object(j.a)(["\n   align-items: center;\n   display: flex;\n\n   ion-button {\n      flex: 0 0 110px;\n   }\n"]))),T=function(){var e=Object(o.useContext)(F),n=e.getVolumesPercentage,t=e.finish,r=Object(o.useState)(!1),c=Object(x.a)(r,2),i=c[0],a=c[1],u=n();return Object(f.jsxs)(M,{children:[Object(f.jsx)(V,{value:u}),Object(f.jsx)(s.d,{color:"danger",disabled:i||1!==u,onClick:function(){a(!0),t().then((function(){return a(!1)}))},children:Object(f.jsx)("span",{className:"text",children:"Finalizar"})})]})},U=function(){return Object(f.jsxs)("div",{className:"container",children:[Object(f.jsx)(s.m,{color:"danger",children:Object(f.jsx)("h1",{children:"N\xe3o existem documentos dispon\xedveis para serem selecionados."})}),Object(f.jsx)("br",{}),Object(f.jsx)(s.d,{color:"danger",fill:"solid",routerLink:"/home",children:"Voltar para home"})]})},A=t(21),R=b.a.button.attrs({className:"PickingListItem"})(P||(P=Object(j.a)(["\n   align-items: center;\n   border: 1px solid rgba(0, 0, 0, 0.1);\n   display: flex;\n   font-size: 1.125rem;\n   justify-content: space-between;\n   margin-top: 0.5rem;\n   padding: 1rem;\n   text-align: center;\n   width: 100%;\n\n   .text {\n      display: inline-block;\n      min-width: 80px;\n      transform: translateY(1px);\n   }\n\n   ion-icon[color='dark'] {\n      margin-left: auto;\n   }\n   ion-icon[color='danger'] {\n      margin: 0 1rem;\n   }\n\n   &:active,\n   &:focus,\n   &:hover {\n      ion-badge {\n         opacity: 1;\n      }\n   }\n"]))),Z=function(e){var n=e.item,t=Object(o.useContext)(F),r=t.getVolumeByBarcode,c=t.putVolume,i=Object(o.useState)(!1),a=Object(x.a)(i,2),u=a[0],l=a[1],d=n.data(),j=[{text:'Colocar volume "Em tr\xe2nsito"',handler:function(){var e=Object(v.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r(d.codBarras,!0);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{text:'Colocar volume como "Pendente"',role:"destructive",handler:function(){var e=Object(v.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c(n.id,{status:"P"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{text:'Colocar volume como "Finalizado"',role:"destructive",handler:function(){var e=Object(v.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c(n.id,{status:"F"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}];return Object(f.jsxs)(R,{onClick:function(){return l(!0)},children:[Object(f.jsx)("span",{className:"text",children:d.codBarras}),Object(f.jsx)(s.f,{color:"danger",icon:A.b}),Object(f.jsx)("span",{className:"text",children:d.idRota}),Object(f.jsx)(s.f,{color:"dark",icon:A.k}),Object(f.jsx)(s.a,{buttons:j,isOpen:u,onDidDismiss:function(){return l(!1)}})]})},J=b.a.div.attrs({className:"PickingList"})(N||(N=Object(j.a)([""]))),K=b.a.h2.attrs({className:"PickingListTitle"})(S||(S=Object(j.a)(["\n   font-size: 0.875rem;\n   font-weight: 600;\n   margin-top: 2rem;\n   text-transform: uppercase;\n"]))),q=function(e){var n=e.children;return Object(f.jsx)(K,{children:n})},Q=function(e){return e.items.map((function(e){return Object(f.jsx)(Z,{item:e},e.data().codBarras)}))},W=function(){var e=Object(o.useContext)(F).volumes,n=[],t=[],r=[];return e.docs.map((function(e){return"F"===e.data().status&&n.push(e),"L"===e.data().status&&t.push(e),"P"===e.data().status&&r.push(e),e})),Object(f.jsxs)(J,{children:[Object(f.jsx)(q,{children:"Pendentes:"}),Object(f.jsx)(Q,{items:r}),Object(f.jsx)(q,{children:"Em tr\xe2nsito:"}),Object(f.jsx)(Q,{items:t}),Object(f.jsx)(q,{children:"Finalizados:"}),Object(f.jsx)(Q,{items:n})]})},G=t(79);var H,X,Y,$=b.a.form(B||(B=Object(j.a)(["\n   display: flex;\n   flex-direction: column;\n   margin: 1rem 0 0;\n\n   ion-button {\n      margin-top: 1rem;\n   }\n\n   ion-input {\n      --padding-start: 0;\n   }\n"]))),ee=function(e){var n=e.onSubmit,t=Object(o.useState)(""),r=Object(x.a)(t,2),c=r[0],i=r[1];return Object(f.jsxs)($,{onSubmit:function(e){return e.preventDefault(),e.stopPropagation(),n(c),!1},children:[Object(f.jsx)(s.g,{autofocus:!0,color:"primary",enterkeyhint:"enter",value:c,placeholder:"Digite o c\xf3digo de barras aqui...",required:!0,onIonChange:function(e){return i(e.detail.value)}}),Object(f.jsx)(s.d,{type:"submit",children:"Enviar c\xf3digo"})]})},ne=b.a.div(H||(H=Object(j.a)(["\n   .ion-page {\n      padding: 3rem;\n   }\n"]))),te=function(e){var n=e.onMatch,t=function(){var e=Object(o.useState)(),n=Object(x.a)(e,2),t=n[0],r=n[1],c=Object(o.useState)(!1),i=Object(x.a)(c,2),a=i[0],s=i[1],u=function(){var e=Object(v.a)(g.a.mark((function e(){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,G.a.scan();case 3:n=e.sent,r(n),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),s(!0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),l=function(){var e=Object(v.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("useBarcodeScanner","Triggered!");try{window.plugins.honeywell.softwareTriggerStart((function(e){return r(e)}))}catch(n){u()}case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(o.useEffect)((function(){try{return window.plugins.honeywell.listen((function(e){return r(e)})),function(){return window.plugins.honeywell.release()}}catch(e){}}),[]),{code:t,setCode:r,modal:a,setModal:s,trigger:l}}();return Object(o.useEffect)((function(){t.code&&n(t.code)}),[t.code,n]),Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(s.d,{color:"danger",onClick:t.trigger,children:"Scan barcode"}),Object(f.jsxs)(ne,{as:s.h,isOpen:t.modal,children:[Object(f.jsxs)("div",{children:["N\xe3o foi poss\xedvel aconar o scanner no seu dispositivo, por favor insira o c\xf3digo de barras manualmente no campo abaixo.",Object(f.jsx)(ee,{onSubmit:function(e){n(e),t.setModal(!1)}})]}),Object(f.jsx)(s.d,{color:"danger",fill:"outline",onClick:function(){return t.setModal(!1)},children:"Cancelar"})]})]})},re=b.a.div.attrs({className:"PickingInfo"})(X||(X=Object(j.a)(["\n   align-self: stretch;\n   border: 5px dashed rgba(0, 0, 0, 0.1);\n   flex: 0 0 auto;\n   padding-top: 56.6%;\n   position: relative;\n"]))),oe=b.a.div.attrs({className:""})(Y||(Y=Object(j.a)(["\n   align-items: center;\n   display: flex;\n   flex-direction: column;\n   justify-content: center;\n   position: absolute;\n   padding: 1rem;\n   top: 0;\n   right: 0;\n   bottom: 0;\n   left: 0;\n   text-align: center;\n\n   overflow-wrap: break-word;\n   word-wrap: break-word;\n   word-break: break-word;\n   hyphens: auto;\n\n   p {\n      color: var(--ion-color-step-150);\n      font-size: 0.875rem;\n      line-height: 1.4;\n      padding: 1rem;\n   }\n\n   h6 {\n      margin: 0;\n   }\n   h1 {\n      font-size: 4rem;\n      font-weight: 700;\n      margin: 1rem 0;\n   }\n"]))),ce=function(e){return Object(f.jsx)(re,{children:Object(f.jsx)(oe,{children:e.children})})},ie=function(){var e,n=Object(o.useContext)(F),t=null===(e=n.volume)||void 0===e?void 0:e.data();return t?Object(f.jsxs)(ce,{children:[Object(f.jsx)("h6",{children:t.codBarras}),Object(f.jsx)("h1",{children:t.rota}),Object(f.jsx)(te,{onMatch:function(e){n.putVolumeInRoute(e)}}),Object(f.jsx)(s.d,{fill:"clear",size:"small",onClick:function(){return n.setVolume()},children:Object(f.jsx)("span",{className:"text",children:"Limpar c\xf3digo de barras"})})]}):Object(f.jsx)(ce,{children:Object(f.jsx)(te,{onMatch:function(e){n.getVolumeByBarcode(e)}})})},ae=function(){return Object(f.jsxs)("div",{className:"container",children:[Object(f.jsx)(ie,{}),Object(f.jsx)("hr",{}),Object(f.jsx)(W,{})]})},se=function(){var e=Object(o.useContext)(F).volumes;return(null===e||void 0===e?void 0:e.docs.length)?Object(f.jsxs)(s.i,{children:[Object(f.jsx)(s.e,{children:Object(f.jsx)(ae,{})}),Object(f.jsx)(T,{})]}):Object(f.jsx)(s.i,{children:Object(f.jsx)(s.e,{children:Object(f.jsx)(U,{})})})},ue=function(e){return Object(f.jsx)(L,{children:Object(f.jsx)(se,{})})},le=function(){return Object(f.jsx)(l.a,{children:Object(f.jsxs)(s.l,{children:[Object(f.jsx)(u.b,{path:"/home",component:m}),Object(f.jsx)(u.b,{path:"/picking",component:ue}),Object(f.jsx)(u.b,{exact:!0,path:"/",component:function(){return Object(f.jsx)(u.a,{to:"/home"})}})]})})},de=(t(100),t(101),t(102),t(103),t(104),t(105),t(106),t(107),t(108),t(109),t(110),function(){return Object(f.jsx)(s.c,{children:Object(f.jsx)(le,{})})});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var je=function(e){e&&e instanceof Function&&t.e(58).then(t.bind(null,176)).then((function(n){var t=n.getCLS,r=n.getFID,o=n.getFCP,c=n.getLCP,i=n.getTTFB;t(e),r(e),o(e),c(e),i(e)}))};Object(s.v)({mode:"ios"}),a.a.render(Object(f.jsx)(c.a.StrictMode,{children:Object(f.jsx)(de,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)})),je()},88:function(e,n,t){var r={"./ion-action-sheet.entry.js":[116,5],"./ion-alert.entry.js":[117,6],"./ion-app_8.entry.js":[118,7],"./ion-avatar_3.entry.js":[119,17],"./ion-back-button.entry.js":[120,18],"./ion-backdrop.entry.js":[121,43],"./ion-button_2.entry.js":[122,19],"./ion-card_5.entry.js":[123,20],"./ion-checkbox.entry.js":[124,21],"./ion-chip.entry.js":[125,22],"./ion-col_3.entry.js":[126,44],"./ion-datetime_3.entry.js":[127,10],"./ion-fab_3.entry.js":[128,23],"./ion-img.entry.js":[129,45],"./ion-infinite-scroll_2.entry.js":[130,46],"./ion-input.entry.js":[131,24],"./ion-item-option_3.entry.js":[132,25],"./ion-item_8.entry.js":[133,26],"./ion-loading.entry.js":[134,27],"./ion-menu_3.entry.js":[135,28],"./ion-modal.entry.js":[136,8],"./ion-nav_2.entry.js":[137,14],"./ion-popover.entry.js":[138,9],"./ion-progress-bar.entry.js":[139,29],"./ion-radio_2.entry.js":[140,30],"./ion-range.entry.js":[141,31],"./ion-refresher_2.entry.js":[142,11],"./ion-reorder_2.entry.js":[143,16],"./ion-ripple-effect.entry.js":[144,47],"./ion-route_4.entry.js":[145,32],"./ion-searchbar.entry.js":[146,33],"./ion-segment_2.entry.js":[147,34],"./ion-select_3.entry.js":[148,35],"./ion-slide_2.entry.js":[149,48],"./ion-spinner.entry.js":[150,13],"./ion-split-pane.entry.js":[151,49],"./ion-tab-bar_2.entry.js":[152,36],"./ion-tab_2.entry.js":[153,15],"./ion-text.entry.js":[154,37],"./ion-textarea.entry.js":[155,38],"./ion-toast.entry.js":[156,39],"./ion-toggle.entry.js":[157,12],"./ion-virtual-scroll.entry.js":[158,50]};function o(e){if(!t.o(r,e))return Promise.resolve().then((function(){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}));var n=r[e],o=n[0];return t.e(n[1]).then((function(){return t(o)}))}o.keys=function(){return Object.keys(r)},o.id=88,e.exports=o},90:function(e,n,t){var r={"./ion-icon.entry.js":[159,57]};function o(e){if(!t.o(r,e))return Promise.resolve().then((function(){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}));var n=r[e],o=n[0];return t.e(n[1]).then((function(){return t(o)}))}o.keys=function(){return Object.keys(r)},o.id=90,e.exports=o}},[[111,3,4]]]);
//# sourceMappingURL=main.4c91c184.chunk.js.map