(this["webpackJsonpdec-xdock"]=this["webpackJsonpdec-xdock"]||[]).push([[1],{110:function(n,e,t){},111:function(n,e,t){"use strict";t.r(e);var r=t(1),o=t.n(r),c=t(51),i=t.n(c),a=t(3),s=t(29),u=t(74),d=t(49),j=t(7),l=t.n(j),b=t(14),f=t(12),p=t(40),h=t(55);t(112),t(113);h.a.initializeApp({apiKey:"AIzaSyBTn0BkjNIKhYxNCrskq6nO_pfSOZBsIgg",authDomain:"dec-xdock-dev.firebaseapp.com",projectId:"dec-xdock-dev",storageBucket:"dec-xdock-dev.appspot.com",messagingSenderId:"770058307297",appId:"1:770058307297:web:ca6040ca13f5049c2299a0",measurementId:"G-N0R90FXN0C"});var g,O,v=h.a.firestore(),m=t(31),x=t(32),y=x.a.div.attrs({className:"PickingProgressBar"})(g||(g=Object(m.a)(["\n   padding: 1rem 1rem 0;\n"]))),k=t(2),w=function(){var n=Object(p.a)(v.collection("picking").where("statusPicking","==","P")),e=Object(f.a)(n,1)[0],t=Object(r.useState)(0),o=Object(f.a)(t,2),c=o[0],i=o[1],s=Object(r.useCallback)(Object(b.a)(l.a.mark((function n(){var t,r,o,c;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t="picking/".concat(null===e||void 0===e?void 0:e.docs[0].id,"/volumes/"),n.next=3,v.collection(t).get();case 3:r=n.sent,o=r.docs.filter((function(n){return"F"===n.data().status})).length,c=r.docs.length||1,i(o/c);case 7:case"end":return n.stop()}}),n)}))),[e]);Object(r.useEffect)((function(){if(!e)return 0;var n;return n=setInterval((function(){return s()}),3e3),function(){return clearInterval(n)}}));var u={color:"danger",type:0===c?"indeterminate":"determinate",value:c};return Object(k.jsx)(y,{children:Object(k.jsx)(a.h,Object(d.a)({},u))})},_=function(){return Object(k.jsxs)("div",{className:"PickingFooter",children:[Object(k.jsx)(w,{}),Object(k.jsxs)(a.k,{children:[Object(k.jsx)(a.c,{slot:"start",children:Object(k.jsx)(a.b,{routerLink:"/picking/list",children:"Volumes"})}),Object(k.jsx)(a.c,{slot:"end",children:Object(k.jsx)(a.b,{routerLink:"/picking/finish",children:"Finalizar"})})]})]})},S=function(){return Object(k.jsx)(k.Fragment,{children:"List"})},C=t(80);var N,F,P,E=x.a.form(O||(O=Object(m.a)(["\n   display: flex;\n   flex-direction: column;\n   margin: 1rem 0 0;\n\n   ion-button {\n      margin-top: 1rem;\n   }\n\n   ion-input {\n      --padding-start: 0;\n   }\n"]))),I=function(n){var e=n.onSubmit,t=Object(r.useState)(""),o=Object(f.a)(t,2),c=o[0],i=o[1];return Object(k.jsxs)(E,{onSubmit:function(n){return n.preventDefault(),n.stopPropagation(),e(c),!1},children:[Object(k.jsx)(a.e,{autofocus:!0,color:"primary",enterkeyhint:"enter",value:c,placeholder:"Digite o c\xf3digo de barras aqui...",required:!0,onIonChange:function(n){return i(n.detail.value)}}),Object(k.jsx)(a.b,{type:"submit",children:"Enviar c\xf3digo"})]})},D=x.a.div(N||(N=Object(m.a)(["\n   .ion-page {\n      padding: 3rem;\n   }\n"]))),L=function(n){var e=n.onMatch,t=function(){var n=Object(r.useState)(),e=Object(f.a)(n,2),t=e[0],o=e[1],c=Object(r.useState)(!1),i=Object(f.a)(c,2),a=i[0],s=i[1],u=function(){var n=Object(b.a)(l.a.mark((function n(){var e;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,C.a.scan();case 3:e=n.sent,o(e),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),s(!0);case 10:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(){return n.apply(this,arguments)}}(),d=function(){var n=Object(b.a)(l.a.mark((function n(){return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:console.log("useBarcodeScanner","Triggered!");try{window.plugins.honeywell.softwareTriggerStart((function(n){return o(n)}))}catch(e){u()}case 2:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return Object(r.useEffect)((function(){try{return window.plugins.honeywell.listen((function(n){return o(n)})),function(){return window.plugins.honeywell.release()}}catch(n){}}),[]),{code:t,setCode:o,modal:a,setModal:s,trigger:d}}();return Object(r.useEffect)((function(){t.code&&e(t.code)}),[t.code,e]),Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(a.b,{color:"danger",onClick:t.trigger,children:"Scan barcode"}),Object(k.jsxs)(D,{as:a.f,isOpen:t.modal,children:[Object(k.jsxs)("div",{children:["N\xe3o foi poss\xedvel aconar o scanner no seu dispositivo, por favor insira o c\xf3digo de barras manualmente no campo abaixo.",Object(k.jsx)(I,{onSubmit:function(n){e(n),t.setModal(!1)}})]}),Object(k.jsx)(a.b,{color:"danger",fill:"outline",onClick:function(){return t.setModal(!1)},children:"Cancelar"})]})]})},B=x.a.div.attrs({className:"PickingInfo"})(F||(F=Object(m.a)(["\n   align-self: stretch;\n   border: 5px dashed rgba(0, 0, 0, 0.1);\n   flex: 0 0 auto;\n   margin: 1rem;\n   padding: 1rem;\n   text-align: center;\n\n   overflow-wrap: break-word;\n   word-wrap: break-word;\n   word-break: break-word;\n   hyphens: auto;\n\n   h6 {\n      margin: 0;\n   }\n   h1 {\n      font-size: 4rem;\n      font-weight: 700;\n      margin: 1rem 0 0;\n   }\n"]))),M=function(n){var e=n.code,t=n.document,r=(n.onFinish,Object(p.c)(v.doc("picking/".concat(null===t||void 0===t?void 0:t.id,"/volumes/").concat(e)))),o=Object(f.a)(r,3),c=o[0],i=o[1],a=o[2];return a||i||!c?Object(k.jsxs)(B,{children:[a&&Object(k.jsx)("strong",{children:JSON.stringify(a)}),i&&Object(k.jsx)("strong",{children:"Loading..."})]}):Object(k.jsxs)(B,{children:[Object(k.jsxs)("h6",{children:["C\xf3d.: ",e]}),Object(k.jsxs)("h6",{children:["Rota: ",c.idRota]}),Object(k.jsx)("h1",{children:c.rota})]})},T=x.a.div.attrs({className:"PickingScan"})(P||(P=Object(m.a)(["\n   align-items: center;\n   display: flex;\n   flex-direction: column;\n   height: 100%;\n   justify-content: center;\n\n   & > ion-button {\n      margin-top: 1rem;\n   }\n"]))),J=function(){var n=Object(r.useState)({}),e=Object(f.a)(n,2),t=e[0],o=t.cage,c=t.code,i=e[1],s=Object(p.b)(v.collection("picking").where("statusPicking","==","P")),u=Object(f.a)(s,3),j=u[0],h=u[1],g=u[2],O=Object(r.useCallback)(function(){var n=Object(b.a)(l.a.mark((function n(e){var t,r;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t="picking/".concat(null===j||void 0===j?void 0:j.docs[0].id,"/volumes/").concat(c),n.prev=1,n.next=4,v.doc(t).get();case 4:if("L"===(r=n.sent).data().status){n.next=7;break}throw new Error("Documento n\xe3o est\xe1 com status lido para ser salvo");case 7:if(r.data().idRota===e){n.next=9;break}throw new Error("Documento n\xe3o est\xe1 na gaiola correta");case 9:v.doc("picking/".concat(null===j||void 0===j?void 0:j.docs[0].id,"/volumes/").concat(c)).set({status:"F"},{merge:!0}),x(),n.next=16;break;case 13:n.prev=13,n.t0=n.catch(1),alert(n.t0);case 16:case"end":return n.stop()}}),n,null,[[1,13]])})));return function(e){return n.apply(this,arguments)}}(),[c,null===j||void 0===j?void 0:j.docs]),m=Object(r.useCallback)(function(){var n=Object(b.a)(l.a.mark((function n(e){var t,r;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t="picking/".concat(null===j||void 0===j?void 0:j.docs[0].id,"/volumes/").concat(e),n.prev=1,n.next=4,v.doc(t).get();case 4:if((r=n.sent).exists){n.next=7;break}throw new Error("Documento solicitado n\xe3o encontrado");case 7:if("P"===r.data().status){n.next=9;break}throw new Error("Documento n\xe3o est\xe1 com status pendente");case 9:v.doc("picking/".concat(null===j||void 0===j?void 0:j.docs[0].id,"/volumes/").concat(e)).set({status:"L"},{merge:!0}),i((function(n){return Object(d.a)(Object(d.a)({},n),{},{code:e})})),n.next=17;break;case 13:n.prev=13,n.t0=n.catch(1),alert(n.t0),x();case 17:case"end":return n.stop()}}),n,null,[[1,13]])})));return function(e){return n.apply(this,arguments)}}(),[null===j||void 0===j?void 0:j.docs]),x=function(){i({})};return g||h?Object(k.jsxs)(T,{children:[g&&Object(k.jsxs)("strong",{children:["Error: ",JSON.stringify(g)]}),h&&Object(k.jsxs)("strong",{children:["Loading: ",JSON.stringify(h)]})]}):Object(k.jsxs)(T,{children:[Object(k.jsx)(M,{cage:o,code:c,document:null===j||void 0===j?void 0:j.docs[0],onFinish:x}),void 0===c&&Object(k.jsx)(L,{onMatch:m}),void 0!==c&&Object(k.jsx)(L,{onMatch:O}),void 0!==c&&Object(k.jsx)(a.b,{fill:"clear",onClick:x,children:"Limpar C\xf3digo"})]})},z=function(){return Object(k.jsxs)(a.j,{children:[Object(k.jsx)(s.b,{exact:!0,path:"/picking/list",component:S}),Object(k.jsx)(s.b,{exact:!0,path:"/picking",component:J})]})},R=function(){return Object(k.jsxs)(a.g,{children:[Object(k.jsx)(a.d,{children:Object(k.jsx)(z,{})}),Object(k.jsx)(_,{})]})},U=function(){return Object(k.jsx)(u.a,{children:Object(k.jsxs)(a.j,{children:[Object(k.jsx)(s.b,{path:"/picking",component:R}),Object(k.jsx)(s.b,{exact:!0,path:"/",component:function(){return Object(k.jsx)(s.a,{to:"/home"})}})]})})},q=(t(100),t(101),t(102),t(103),t(104),t(105),t(106),t(107),t(108),t(109),t(110),function(){return Object(k.jsx)(a.a,{children:Object(k.jsx)(U,{})})});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var A=function(n){n&&n instanceof Function&&t.e(58).then(t.bind(null,176)).then((function(e){var t=e.getCLS,r=e.getFID,o=e.getFCP,c=e.getLCP,i=e.getTTFB;t(n),r(n),o(n),c(n),i(n)}))};Object(a.t)({mode:"md"}),i.a.render(Object(k.jsx)(o.a.StrictMode,{children:Object(k.jsx)(q,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(n){n.unregister()})).catch((function(n){console.error(n.message)})),A()},88:function(n,e,t){var r={"./ion-action-sheet.entry.js":[116,5],"./ion-alert.entry.js":[117,6],"./ion-app_8.entry.js":[118,7],"./ion-avatar_3.entry.js":[119,17],"./ion-back-button.entry.js":[120,18],"./ion-backdrop.entry.js":[121,43],"./ion-button_2.entry.js":[122,19],"./ion-card_5.entry.js":[123,20],"./ion-checkbox.entry.js":[124,21],"./ion-chip.entry.js":[125,22],"./ion-col_3.entry.js":[126,44],"./ion-datetime_3.entry.js":[127,10],"./ion-fab_3.entry.js":[128,23],"./ion-img.entry.js":[129,45],"./ion-infinite-scroll_2.entry.js":[130,46],"./ion-input.entry.js":[131,24],"./ion-item-option_3.entry.js":[132,25],"./ion-item_8.entry.js":[133,26],"./ion-loading.entry.js":[134,27],"./ion-menu_3.entry.js":[135,28],"./ion-modal.entry.js":[136,8],"./ion-nav_2.entry.js":[137,14],"./ion-popover.entry.js":[138,9],"./ion-progress-bar.entry.js":[139,29],"./ion-radio_2.entry.js":[140,30],"./ion-range.entry.js":[141,31],"./ion-refresher_2.entry.js":[142,11],"./ion-reorder_2.entry.js":[143,16],"./ion-ripple-effect.entry.js":[144,47],"./ion-route_4.entry.js":[145,32],"./ion-searchbar.entry.js":[146,33],"./ion-segment_2.entry.js":[147,34],"./ion-select_3.entry.js":[148,35],"./ion-slide_2.entry.js":[149,48],"./ion-spinner.entry.js":[150,13],"./ion-split-pane.entry.js":[151,49],"./ion-tab-bar_2.entry.js":[152,36],"./ion-tab_2.entry.js":[153,15],"./ion-text.entry.js":[154,37],"./ion-textarea.entry.js":[155,38],"./ion-toast.entry.js":[156,39],"./ion-toggle.entry.js":[157,12],"./ion-virtual-scroll.entry.js":[158,50]};function o(n){if(!t.o(r,n))return Promise.resolve().then((function(){var e=new Error("Cannot find module '"+n+"'");throw e.code="MODULE_NOT_FOUND",e}));var e=r[n],o=e[0];return t.e(e[1]).then((function(){return t(o)}))}o.keys=function(){return Object.keys(r)},o.id=88,n.exports=o},90:function(n,e,t){var r={"./ion-icon.entry.js":[159,57]};function o(n){if(!t.o(r,n))return Promise.resolve().then((function(){var e=new Error("Cannot find module '"+n+"'");throw e.code="MODULE_NOT_FOUND",e}));var e=r[n],o=e[0];return t.e(e[1]).then((function(){return t(o)}))}o.keys=function(){return Object.keys(r)},o.id=90,n.exports=o}},[[111,3,4]]]);
//# sourceMappingURL=main.3c46260e.chunk.js.map